import{d as B,n as O,p as S,q as F,k as $,l as D,r as I,b as A,o as U,c as V,e as r,w as n,f as u,g as m,h as i,F as j,B as p,m as l,N as E,s as H,v as L}from"./index-e716d3d9.js";import{m as q}from"./millisecondsToTime-a5179fb2.js";import{_ as M}from"./BaseTableButton.vue_vue_type_script_setup_true_lang-014cd859.js";import{_ as R}from"./ProgressIndicator.vue_vue_type_script_setup_true_lang-95e2d5fe.js";import{_ as h}from"./ItemList.vue_vue_type_script_setup_true_lang-154cada0.js";import{N as z}from"./headers-7708fb58.js";import{a as G,_ as J}from"./DataTable-ff25302c.js";import{_ as K}from"./Button-f21259ea.js";import{_ as Q}from"./Card-53e744b1.js";const W={class:"space-y-6"},X={class:"grid items-center gap-12 grid-cols-[360px_120px_120px]"},Y=m("div",null,"Only show items which you can afford to produce.",-1),Z=m("div",null,"Only show items which you are currently producing.",-1),le=B({__name:"production",setup(ee){const y=O(),a=S(),{canAfford:k}=F(),N=$(),v=D(),w=[{title:"Name",key:"name",width:200,defaultSortOrder:"ascend",sorter:(t,e)=>t.name.localeCompare(e.name)},{title:"Description",key:"description",width:280},{title:"Input",key:"input",width:240,render(t){const e=p[t.id];return e.cost?l(h,{affordable:!0,energy:e.cost.energy,money:e.cost.money,items:e.cost.items?Object.values(e.cost.items):[]}):null}},{title:"Output",key:"output",width:240,render(t){const e=p[t.id];return l(h,{items:Object.values(e.items)})}},{title:"Production Time",key:"productionTime",className:"font-mono",width:90},{title:"Progress",key:"progress",width:70,render(t){if(!a.producing[t.id])return l("div");const s=N.value.getTime(),d=a.getProgress(t.id,s);return l(R,{progress:d})}},{title:"Actions",key:"actions",width:60,render(t){const e=a.getProducing(t.id);return l(M,{iconClass:[e?"ico-mdi-pause":"ico-mdi-play",e?"text-red":"text-green"],onClick:e?()=>a.stopProduction(t.id):()=>{try{a.startProduction({blueprintId:t.id,repeat:!0})}catch(s){s instanceof Error&&v.error(s.message)}}})}}],o=I({affordable:!1,producing:!1,search:""}),b=A(()=>{let t=y.blueprints.map(e=>{const{name:s,description:d,productionTime:_}=p[e];return{id:e,name:s,description:d,productionTime:q(_)}});return o.affordable&&(t=t.filter(e=>k(p[e.id].cost))),o.producing&&(t=t.filter(e=>a.isProducing(e.id))),o.search&&(t=t.filter(e=>e.name.toLowerCase().includes(o.search.toLowerCase()))),t});function x(){o.affordable=!1,o.producing=!1,o.search=""}return(t,e)=>{const s=z,d=E,_=H,f=G,g=L,P=K,C=Q,T=J;return U(),V(j,null,[r(s,null,{default:n(()=>[u("Production")]),_:1}),m("div",W,[r(C,{title:"Filter"},{action:n(()=>[r(P,{secondary:"",onClick:e[3]||(e[3]=c=>x())},{default:n(()=>[u(" Reset Filters ")]),_:1})]),default:n(()=>[m("div",X,[r(_,{value:i(o).search,"onUpdate:value":e[0]||(e[0]=c=>i(o).search=c),placeholder:"Search"},{prefix:n(()=>[r(d,{class:"ico-mdi-magnify"})]),_:1},8,["value"]),r(g,{trigger:"hover"},{trigger:n(()=>[r(f,{checked:i(o).affordable,"onUpdate:checked":e[1]||(e[1]=c=>i(o).affordable=c)},{default:n(()=>[u(" Affordable ")]),_:1},8,["checked"])]),default:n(()=>[Y]),_:1}),r(g,{trigger:"hover"},{trigger:n(()=>[r(f,{checked:i(o).producing,"onUpdate:checked":e[2]||(e[2]=c=>i(o).producing=c)},{default:n(()=>[u(" Producing ")]),_:1},8,["checked"])]),default:n(()=>[Z]),_:1})])]),_:1}),r(T,{columns:w,data:i(b),"single-line":!1,"table-layout":"fixed"},null,8,["data"])])],64)}}});export{le as default};
