import{d as y,n as g,p as _,u as x,y as h,k as v,l as k,b as P,o as N,c as $,e as i,w as S,f as T,h as C,F as E,m as o,I as c,N as I,B as w}from"./index-4ea20c40.js";import{_ as B}from"./BaseTableButton.vue_vue_type_script_setup_true_lang-43bb635c.js";import{_ as O}from"./ProgressIndicator.vue_vue_type_script_setup_true_lang-875db53e.js";import{N as q}from"./headers-93aa5d29.js";import{_ as F}from"./DataTable-ff2c686d.js";import"./Button-8586155c.js";const Q=y({__name:"production",setup(M){const d=g(),n=_(),a=x(),m=h(),u=v(),l=k(),p=[{title:"Name",key:"name",sorter:(e,t)=>e.name.localeCompare(t.name)},{title:"Description",key:"description"},{title:"Cost",key:"cost",render(e){if(!e.cost)return o("div");const t=[];return e.cost.items&&t.push(o("div",{},Object.values(e.cost.items).map(s=>o("div",{class:["flex items-center",a.hasQuantityOfItem(s.id,s.quantity)?"text-green":"text-red"]},`${s.quantity} ${c[s.id].name}`)))),e.cost.energy&&t.push(o("div",{class:["flex items-center gap-1",m.hasEnoughEnergy(e.cost.energy)?"text-green":"text-red"]},[o("span",{},`${e.cost.energy}`),o(I,{class:"ico-mdi-flash"})])),e.cost.money&&t.push(o("div",{class:["flex items-center",a.hasEnoughMoney(e.cost.money)?"text-green":"text-red"]},`${e.cost.money} $`)),o("div",{class:"font-mono"},t)}},{title:"Output",key:"items",minWidth:160,render(e){return o("div",{class:"font-mono"},Object.values(e.items).map(t=>o("div",{class:"flex items-center"},`${t.quantity} ${c[t.id].name} (${100*t.probability}%)`)))}},{title:"Time",key:"productionTime",maxWidth:120,render(e){return o("div",{class:"font-mono"},e.productionTime/1e3)}},{title:"Per minute",key:"productionsPerMinute",render(e){return o("div",{class:"font-mono"},(6e4/e.productionTime).toFixed(2))}},{title:"Progress",key:"progress",width:90,render(e){if(!n.producing[e.id])return o("div");const s=u.value.getTime(),r=n.getProgress(e.id,s);return o(O,{progress:r})}},{title:"Actions",key:"actions",render(e){const t=n.getProducing(e.id);return o(B,{iconClass:[t?"ico-mdi-pause":"ico-mdi-play",t?"text-red":"text-green"],onClick:t?()=>n.stopProduction(e.id):()=>{try{n.startProduction({blueprintId:e.id,repeat:!0})}catch(s){s instanceof Error&&l.error(s.message)}}})}}],f=P(()=>d.blueprints.map(e=>({...w[e]})));return(e,t)=>{const s=q,r=F;return N(),$(E,null,[i(s,null,{default:S(()=>[T("Production")]),_:1}),i(r,{columns:p,data:C(f)},null,8,["data"])],64)}}});export{Q as default};
